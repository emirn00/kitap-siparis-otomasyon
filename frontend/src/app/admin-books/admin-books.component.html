<div class="admin-container">
  <div class="hueber-header">
    <div class="logo-container">
      <h1 class="hueber-logo">HUEBER</h1>
      <h2 class="header-subtitle">Kitaplar / B√ºcher</h2>
      <a routerLink="/admin" class="help-link">Admin Ana Sayfa / Admin Startseite</a>
    </div>
  </div>

  <mat-card class="form-card">
    <mat-card-content>
      <h2 class="section-title">Kitap Y√∂netimi / Buchverwaltung</h2>
      <p class="section-description">
        Bu sayfada kitaplarƒ± g√∂r√ºnt√ºleyebilir, arayabilir ve √∂zelliklerini (Request Name, Order Name, Lisencode Name,
        ISBN) d√ºzenleyebilirsiniz.
        / Auf dieser Seite k√∂nnen Sie B√ºcher anzeigen, suchen und deren Eigenschaften bearbeiten.
      </p>

      <div *ngIf="addSuccess" class="alert alert-success">
        <span>{{ addSuccess }}</span>
      </div>
      <div *ngIf="updateSuccess" class="alert alert-success">
        <span>{{ updateSuccess }}</span>
      </div>
      <div *ngIf="updateError" class="alert alert-error">
        <span>{{ updateError }}</span>
      </div>
      <div *ngIf="deleteError" class="alert alert-error">
        <span>{{ deleteError }}</span>
      </div>

      <div class="filters-section">
        <div class="search-header">
          <div class="custom-input-group">
            <div class="search-input-wrapper">
              <i class="search-icon">üîç</i>
              <input type="text" class="custom-search-input" [(ngModel)]="searchTerm"
                [ngModelOptions]="{ standalone: true }" (keyup.enter)="onSearch()"
                placeholder="ISBN veya Kitap Adƒ± / ISBN oder Buchtitel">
            </div>
            <button class="btn-search" (click)="onSearch()">
              Ara / Suchen
            </button>
          </div>
          <a mat-flat-button color="accent" routerLink="/admin/add-book" class="btn-add-book">
            <mat-icon>add</mat-icon> Kitap Ekle / Buch hinzuf√ºgen
          </a>
        </div>
        <div class="stats-row">
          <div class="stat-card">
            <div class="stat-value">{{ getTotalBooks() }}</div>
            <div class="stat-label">Toplam Kitap / Gesamt B√ºcher</div>
          </div>
        </div>
      </div>

      <div class="books-list" *ngIf="!booksLoading && filteredBooks.length > 0">
        <app-book-card *ngFor="let book of filteredBooks" [book]="book" [isEditing]="editingBook?.id === book.id"
          [isDeleting]="deletingBookId === book.id" (edit)="startEdit($event)" (delete)="confirmDelete($event)"
          (save)="saveBook()" (cancel)="cancelEdit()" (confirmDelete)="deleteBook()" (cancelDelete)="cancelDelete()">
        </app-book-card>
      </div>

      <div class="load-more-container" *ngIf="!booksLoading && hasMore()">
        <button mat-stroked-button color="primary" (click)="onLoadMore()" class="load-more-btn">
          Daha Fazla Y√ºkle / Mehr laden
        </button>
      </div>

      <div *ngIf="booksLoading" class="books-loading">
        Kitaplar y√ºkleniyor / B√ºcher werden geladen‚Ä¶
      </div>
      <div *ngIf="booksLoadError" class="alert alert-error">
        <span>{{ booksLoadError }}</span>
      </div>

      <div class="empty-state" *ngIf="!booksLoading && !booksLoadError && filteredBooks.length === 0">
        <p>Sonu√ß bulunamadƒ± / Keine Ergebnisse gefunden</p>
        <p class="empty-hint">
          Kitap eklemek i√ßin saƒü √ºstteki "Kitap Ekle" butonunu kullanƒ±n. / Verwenden Sie "Buch hinzuf√ºgen", um B√ºcher hinzuzuf√ºgen.
        </p>
        <a mat-raised-button color="primary" routerLink="/admin/add-book">Kitap Ekle / Buch hinzuf√ºgen</a>
      </div>
    </mat-card-content>
  </mat-card>
</div>