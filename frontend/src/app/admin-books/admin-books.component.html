<div class="admin-container">
  <div class="hueber-header">
    <div class="logo-container">
      <h1 class="hueber-logo">HUEBER</h1>
      <h2 class="header-subtitle">{{ 'books' | translate }}</h2>
      <a routerLink="/admin" class="help-link">{{ 'adminHome' | translate }}</a>
    </div>
  </div>

  <mat-card class="form-card">
    <mat-card-content>
      <h2 class="section-title">{{ 'bookManagement' | translate }}</h2>
      <p class="section-description">{{ 'bookManagementDesc' | translate }}</p>

      <div *ngIf="addSuccess" class="alert alert-success">
        <span>{{ addSuccess }}</span>
      </div>
      <div *ngIf="updateSuccess" class="alert alert-success">
        <span>{{ updateSuccess }}</span>
      </div>
      <div *ngIf="updateError" class="alert alert-error">
        <span>{{ updateError }}</span>
      </div>
      <div *ngIf="deleteError" class="alert alert-error">
        <span>{{ deleteError }}</span>
      </div>

      <div class="filters-section">
        <div class="search-header">
          <div class="custom-input-group">
            <div class="search-input-wrapper">
              <i class="search-icon">üîç</i>
              <input type="text" class="custom-search-input" [(ngModel)]="searchTerm"
                [ngModelOptions]="{ standalone: true }" (keyup.enter)="onSearch()"
                [placeholder]="'searchPlaceholder' | translate">
            </div>
            <button class="btn-search" (click)="onSearch()">
              {{ 'search' | translate }}
            </button>
          </div>
          <a mat-flat-button color="accent" routerLink="/admin/add-book" class="btn-add-book">
            {{ 'addBook' | translate }}
          </a>
        </div>
        <div class="stats-row">
          <div class="stat-card">
            <div class="stat-value">{{ getTotalBooks() }}</div>
            <div class="stat-label">{{ 'totalBooks' | translate }}</div>
          </div>
        </div>
      </div>

      <div class="books-list" *ngIf="!booksLoading && filteredBooks.length > 0">
        <app-book-card *ngFor="let book of filteredBooks" [book]="book" [isEditing]="editingBook?.id === book.id"
          [isDeleting]="deletingBookId === book.id" (edit)="startEdit($event)" (delete)="confirmDelete($event)"
          (save)="saveBook()" (cancel)="cancelEdit()" (confirmDelete)="deleteBook()" (cancelDelete)="cancelDelete()">
        </app-book-card>
      </div>

      <div class="load-more-container" *ngIf="!booksLoading && hasMore()">
        <button mat-stroked-button color="primary" (click)="onLoadMore()" class="load-more-btn">
          {{ 'loadMore' | translate }}
        </button>
      </div>

      <div *ngIf="booksLoading" class="books-loading">
        {{ 'booksLoading' | translate }}
      </div>
      <div *ngIf="booksLoadError" class="alert alert-error">
        <span>{{ booksLoadError }}</span>
      </div>

      <div class="empty-state" *ngIf="!booksLoading && !booksLoadError && filteredBooks.length === 0">
        <p>{{ 'noResults' | translate }}</p>
        <p class="empty-hint">{{ 'noResultsHint' | translate }}</p>
        <a mat-raised-button color="primary" routerLink="/admin/add-book">{{ 'addBook' | translate }}</a>
      </div>
    </mat-card-content>
  </mat-card>
</div>